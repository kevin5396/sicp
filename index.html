<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2016-09-13 Tue 10:20 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="viewport" content="width=device-width, initial-scale=1" />
<title>Answers to Exercises in the book SICP</title>
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="kevin5396" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<meta name='viewport' content='width=device-width, initial-scale=1.0'>
<link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600,600italic' rel='stylesheet' type='text/css'>
<link rel="stylesheet" type="text/css" href="/css/book/style.css" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content">
<h1 class="title">Answers to Exercises in the book SICP
<br>
<span class="subtitle">Structure and Interpretation of Computer Programs</span>
</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgheadline25">1. <span class="todo TODO">TODO</span> Building Abstractions with Procedures</a>
<ul>
<li><a href="#orgheadline1">1.1. Exercise 1.1</a></li>
<li><a href="#orgheadline2">1.2. Exercise 1.2</a></li>
<li><a href="#orgheadline3">1.3. Exercise 1.3</a></li>
<li><a href="#orgheadline4">1.4. Exercise 1.4</a></li>
<li><a href="#orgheadline5">1.5. Exercise 1.5</a></li>
<li><a href="#orgheadline6">1.6. Exercise 1.6</a></li>
<li><a href="#orgheadline7">1.7. Exercise 1.7</a></li>
<li><a href="#orgheadline8">1.8. Exercise 1.8</a></li>
<li><a href="#orgheadline9">1.9. Exercise 1.9</a></li>
<li><a href="#orgheadline10">1.10. Exercise 1.10</a></li>
<li><a href="#orgheadline11">1.11. Exercise 1.11</a></li>
<li><a href="#orgheadline12">1.12. Exercise 1.12</a></li>
<li><a href="#orgheadline13">1.13. Exercise 1.13</a></li>
<li><a href="#orgheadline14">1.14. Exercise 1.14</a></li>
<li><a href="#orgheadline17">1.15. Exercise 1.15</a>
<ul>
<li><a href="#orgheadline15">1.15.1. a</a></li>
<li><a href="#orgheadline16">1.15.2. b</a></li>
</ul>
</li>
<li><a href="#orgheadline18">1.16. Exercise 1.16</a></li>
<li><a href="#orgheadline19">1.17. Exercise 1.17</a></li>
<li><a href="#orgheadline20">1.18. Exercise 1.18</a></li>
<li><a href="#orgheadline21">1.19. Exercise 1.19</a></li>
<li><a href="#orgheadline22">1.20. Exercise 1.20</a></li>
<li><a href="#orgheadline23">1.21. Exercise 1.21</a></li>
<li><a href="#orgheadline24">1.22. Exercise 1.22</a></li>
</ul>
</li>
<li><a href="#orgheadline26">2. <span class="todo TODO">TODO</span> Building Abstractions with Data</a></li>
<li><a href="#orgheadline27">3. <span class="todo TODO">TODO</span> Modularity, Objects, and State</a></li>
<li><a href="#orgheadline28">4. <span class="todo TODO">TODO</span> Metalinguistic Abstraction</a></li>
<li><a href="#orgheadline29">5. <span class="todo TODO">TODO</span> Computing with Register Machines</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline25" class="outline-2">
<h2 id="orgheadline25"><span class="section-number-2">1</span> <span class="todo TODO">TODO</span> Building Abstractions with Procedures</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-orgheadline1" class="outline-3">
<h3 id="orgheadline1"><span class="section-number-3">1.1</span> Exercise 1.1</h3>
<div class="outline-text-3" id="text-1-1">
<div class="org-src-container">

<pre class="src src-scheme">10
(+ 5 3 4)
(- 9 1)
(/ 6 2)
(+ (* 2 4) (- 4 6))
(<span style="color: #859900;">define</span> <span style="color: #268bd2;">a</span> 3)
(<span style="color: #859900;">define</span> <span style="color: #268bd2;">b</span> (+ a 1))
(+ a b (* a b))
(= a b)
(<span style="color: #859900;">if</span> (<span style="color: #859900;">and</span> (&gt; b a) (&lt; b (* a b)))
        b
        a)
(<span style="color: #859900;">cond</span> ((= a 4) 6)
          ((= b 4) (+ 6 7 a))
          (<span style="color: #859900;">else</span> 25))
(+ 2 (<span style="color: #859900;">if</span> (&gt; b a) b a))
(* (<span style="color: #859900;">cond</span> ((&gt; a b) a)
                 ((&lt; a b) b)
                 (<span style="color: #859900;">else</span> -1))
   (+ a 1))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline2" class="outline-3">
<h3 id="orgheadline2"><span class="section-number-3">1.2</span> Exercise 1.2</h3>
<div class="outline-text-3" id="text-1-2">
<p>
I've rewritten it in valid scheme-format.
</p>
<div class="org-src-container">

<pre class="src src-scheme">(/ (+ 5 4 (- 2 (- 3 (+ 6 (/ 4 5)))))
   (* 3 (- 6 2) (- 2 7)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline3" class="outline-3">
<h3 id="orgheadline3"><span class="section-number-3">1.3</span> Exercise 1.3</h3>
<div class="outline-text-3" id="text-1-3">
<div class="org-src-container">

<pre class="src src-scheme">(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">square</span> x) (* x x))

<span style="color: #93a1a1; font-style: italic;">; </span><span style="color: #93a1a1; font-style: italic;">A simple implementation</span>
(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">sum-sqr-big-0</span> a b c)
        (<span style="color: #859900;">cond</span> ((&gt; a b)
                          (<span style="color: #859900;">cond</span> ((&gt; b c) (+ (square a) (square b)))
                                        (<span style="color: #859900;">else</span>    (+ (square a) (square c)))))
                  (<span style="color: #859900;">else</span>
                          (<span style="color: #859900;">cond</span> ((&gt; c a) (+ (square b) (square c)))
                                    (<span style="color: #859900;">else</span>    (+ (square b) (square a)))))))

<span style="color: #93a1a1; font-style: italic;">; </span><span style="color: #93a1a1; font-style: italic;">a nicer way</span>
(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">sum-of-square</span> x y)
        (+ (square x) (square y)))

(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">bigger</span> x y)
        (<span style="color: #859900;">if</span> (&gt; x y)
                x
                y))

(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">smaller</span> x y)
        (<span style="color: #859900;">if</span> (&lt; x y)
                x
                y))

(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">sum-sqr-big-1</span> a b c)
        (sum-of-square (bigger a b)
                                   (bigger (smaller a b) c)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline4" class="outline-3">
<h3 id="orgheadline4"><span class="section-number-3">1.4</span> Exercise 1.4</h3>
<div class="outline-text-3" id="text-1-4">
<p>
<code>((if (&gt; b 0) + -) a b)</code>
</p>
<ul class="org-ul">
<li>if b &gt; 0, then + is the operator and thus a + b is performed.</li>
<li>otherwise, a - b is performed.</li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline5" class="outline-3">
<h3 id="orgheadline5"><span class="section-number-3">1.5</span> Exercise 1.5</h3>
<div class="outline-text-3" id="text-1-5">
<ul class="org-ul">
<li>For applicative-order evaluation, it'll enter a infinite loop. Because firstly interpreter will try to substitute (p) by (p) according to the definiton, but this will never end.</li>
<li>For normal-order evaluation, the result is 0.</li>
</ul>
<p>
<code>(test 0 (p))</code> will be interpret as <code>(if (= 0 0) 0 (p))</code> and then 0, because the predicate expression is evaluated first, (p) will never be substitute.
</p>
</div>
</div>

<div id="outline-container-orgheadline6" class="outline-3">
<h3 id="orgheadline6"><span class="section-number-3">1.6</span> Exercise 1.6</h3>
<div class="outline-text-3" id="text-1-6">
<p>
Unfortunately, this <code>new-if</code> doesn't work as the special form <code>if</code>
does. The <code>new-if</code>, under current context, is no more than a
predefined procedure. So it'will behave just like other procedures :
calculate the value of the operands and then use these values to do
the procedures. No matter what result the predicate will produce, the
then-clause and the else-clause both get evaluated.
</p>

<p>
In the <code>sqrt-iter</code> program, use the <code>new-if</code> will cause the program to
run forever. The evaluation of <code>sqrt-root</code> will never end.
</p>
</div>
</div>

<div id="outline-container-orgheadline7" class="outline-3">
<h3 id="orgheadline7"><span class="section-number-3">1.7</span> Exercise 1.7</h3>
<div class="outline-text-3" id="text-1-7">
<p>
Use the code in the book, when calculating square root of small
numbers, like 0.0009, the interpreter output 0.04.
</p>

<p>
Instead of setting the absolute value that the answer's square and
radicand differs, we can use a value to restrict the ratio of the
error, say, 0.1%.
</p>
<div class="org-src-container">

<pre class="src src-scheme">(load <span style="color: #2aa198;">"square-root.scm"</span>)

(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">good-enough?</span> guess x)
  (&lt; (abs (/ (-
              (square guess)
              x)
             x))
     0.001))
</pre>
</div>
<p>
Using the new <code>good-enough</code> test, now the program
can produce answer much more accurate. For 0.0009,
the answer is 3.0000012746348552e-2.
</p>
</div>
</div>

<div id="outline-container-orgheadline8" class="outline-3">
<h3 id="orgheadline8"><span class="section-number-3">1.8</span> Exercise 1.8</h3>
<div class="outline-text-3" id="text-1-8">
<div class="org-src-container">

<pre class="src src-scheme"><span style="color: #93a1a1; font-style: italic;">;; </span><span style="color: #93a1a1; font-style: italic;">Newton's method for cube roots</span>

(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">square</span> x) (* x x))

(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">improve</span> y x)
  (/ (+ (/ x
           (square y))
        (* 2 y))
     3))

(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">cube</span> x) (* x (square x)))

(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">good-enough?</span> guess x)
  (&lt; (/ (abs (- (cube guess)
                x))
        x)
     0.001))

(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">cube-iter</span> guess x)
  (<span style="color: #859900;">if</span> (good-enough? guess x)
      guess
      (cube-iter (improve guess x) x)))

(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">cube-root</span> x)
  (cube-iter 1.0 x))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline9" class="outline-3">
<h3 id="orgheadline9"><span class="section-number-3">1.9</span> Exercise 1.9</h3>
<div class="outline-text-3" id="text-1-9">
<ul class="org-ul">
<li><p>
The first one :
</p>
<div class="org-src-container">

<pre class="src src-scheme">(+ 4 5)
(inc (+ 3 5))
(inc (inc (+ 2 5)))
(inc (inc (inc (+ 1 5))))
(inc (inc (inc (inc (+ 0 5)))))
(inc (inc (inc (inc 5))))
(inc (inc (inc 6)))
(inc (inc 7))
(inc 8)
9
</pre>
</div>
<p>
As we can see, this process fully expands then contracts and
the length of the chain of deferred <code>inc</code> operations, with the
amount of information needed to keep track of it, grows linearly
with n. Therefore it's a linear recursive process.
</p></li>
<li><p>
The second one:
</p>
<div class="org-src-container">

<pre class="src src-scheme">(+ 4 5)
(+ 3 6)
(+ 2 7)
(+ 1 8)
(+ 0 9)
9
</pre>
</div>
<p>
This process does not grow and shrink, it's a linear iterative
process.
</p></li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline10" class="outline-3">
<h3 id="orgheadline10"><span class="section-number-3">1.10</span> Exercise 1.10</h3>
<div class="outline-text-3" id="text-1-10">
<p>
Use mathematical stuff, we can say that A is some kind of function
f, s.t.,
</p>
<ul class="org-ul">
<li>f(anyvalue, 0) = 0</li>
<li>f(0, anyvalue) = 2 * anyvalue</li>
<li>f(anyvalue, 1) = 2</li>
<li>otherwise, f(x, y) = f(x-1, f(x, y-1))</li>
</ul>
<p>
Using substitution model,
</p>
<div class="org-src-container">

<pre class="src src-scheme"><span style="color: #93a1a1; font-style: italic;">;; </span><span style="color: #93a1a1; font-style: italic;">process (A 1 10)</span>
(A 1 10)
(A 0 (A 1 9))
(A 0 (A 0 (A 1 8)))
(A 0 (A 0 (A 0 (A 1 7))))
(A 0 (A 0 (A 0 (A 0 (A 1 6)))))
(A 0 (A 0 (A 0 (A 0 (A 0 (A 1 5))))))
(A 0 (A 0 (A 0 (A 0 (A 0 (A 0 (A 1 4)))))))
(A 0 (A 0 (A 0 (A 0 (A 0 (A 0 (A 0 (A 1 3))))))))
(A 0 (A 0 (A 0 (A 0 (A 0 (A 0 (A 0 (A 0 (A 1 2)))))))))
(A 0 (A 0 (A 0 (A 0 (A 0 (A 0 (A 0 (A 0 (A 0 (A 1 1))))))))))
(A 0 (A 0 (A 0 (A 0 (A 0 (A 0 (A 0 (A 0 (A 0 2)))))))))
(A 0 (A 0 (A 0 (A 0 (A 0 (A 0 (A 0 (A 0 4))))))))
(A 0 (A 0 (A 0 (A 0 (A 0 (A 0 (A 0 8)))))))
   ...
   ...
1024 <span style="color: #93a1a1; font-style: italic;">; </span><span style="color: #93a1a1; font-style: italic;">2 to the power of 10</span>
<span style="color: #93a1a1; font-style: italic;">;; </span><span style="color: #93a1a1; font-style: italic;">seems f(1, n) = 2^n for n &gt; 0</span>


<span style="color: #93a1a1; font-style: italic;">;; </span><span style="color: #93a1a1; font-style: italic;">(A 2 4)</span>
(A 2 4)
(A 1 (A 2 3))
(A 1 (A 1 (A 2 2)))
(A 1 (A 1 (A 1 (A 2 1))))
(A 1 (A 1 (A 1 2)))
(A 1 (A 1 (A 0 (A 1 1))))
(A 1 (A 1 (A 0 2)))
(A 1 (A 1 4))
(A 1 (A 0 (A 1 3)))
(A 1 (A 0 8))
(A 1 16)
65536 <span style="color: #93a1a1; font-style: italic;">; </span><span style="color: #93a1a1; font-style: italic;">2^16</span>
<span style="color: #93a1a1; font-style: italic;">;; </span><span style="color: #93a1a1; font-style: italic;">notice the pattern here, f(2, n) = f(1, f(2, n-1)) = 2^f(2, n-1)</span>

(A 3 3)
(A 2 (A 3 2))
(A 2 (A 2 (A 3 1)))
(A 2 (A 2 2))
(A 2 4)
65536
<span style="color: #93a1a1; font-style: italic;">;; </span><span style="color: #93a1a1; font-style: italic;">f(3, n) = f(2, f(3, n-1))</span>
</pre>
</div>
<p>
It's easy to see that,
</p>
<ul class="org-ul">
<li><code>(f n)</code> computes 2*n</li>
<li><code>(g n)</code> computes 2<sup>n</sup></li>
<li><code>(h n)</code> computes 2<sup>2<sup>&#x2026;</sup></sup>, n layers of exponent.</li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline11" class="outline-3">
<h3 id="orgheadline11"><span class="section-number-3">1.11</span> Exercise 1.11</h3>
<div class="outline-text-3" id="text-1-11">
<div class="org-src-container">

<pre class="src src-scheme"><span style="color: #93a1a1; font-style: italic;">;; </span><span style="color: #93a1a1; font-style: italic;">recursive</span>

(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">f-recursive</span> n) (f-rec-iter n))
(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">f-rec-iter</span> n)
  (<span style="color: #859900;">cond</span> ((&lt; n 3) n)
        (<span style="color: #859900;">else</span> (+ (f-rec-iter (- n 1))
                 (* 2
                    (f-rec-iter (- n 2)))
                 (* 3
                    (f-rec-iter (- n 3)))))))

<span style="color: #93a1a1; font-style: italic;">;; </span><span style="color: #93a1a1; font-style: italic;">iterative</span>
(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">f-iterative</span> n) (f-iter-iter 2 1 0 n))
(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">f-iter-iter</span> a b c count)
  (<span style="color: #859900;">if</span> (= count 0)
      c
      (f-iter-iter (+ a
                      (* 2 b)
                      (* 3 c))
                   a
                   b
                   (- count 1))))
</pre>
</div>
<p>
running the recursive version with n = 100 is like forever&#x2026;Yet the
iterative version immediately return the answer.
</p>
</div>
</div>

<div id="outline-container-orgheadline12" class="outline-3">
<h3 id="orgheadline12"><span class="section-number-3">1.12</span> Exercise 1.12</h3>
<div class="outline-text-3" id="text-1-12">
<p>
The procedure <code>(pascal row col)</code> gives the element at the
corresponding row and column.
</p>
<div class="org-src-container">

<pre class="src src-scheme"><span style="color: #93a1a1; font-style: italic;">;; </span><span style="color: #93a1a1; font-style: italic;">recursive</span>

(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">pascal</span> row col)
  (<span style="color: #859900;">if</span> (<span style="color: #859900;">or</span> (= row 0)
          (= row 1)
          (= col 0)
          (= row col))
      1
      (+ (pascal (- row 1)
                 (- col 1))
         (pascal (- row 1)
                 col))))


<span style="color: #93a1a1; font-style: italic;">;; </span><span style="color: #93a1a1; font-style: italic;">iterative, a little mathematics</span>

(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">pascal-iter</span> row col)
  (<span style="color: #859900;">if</span> (<span style="color: #859900;">or</span> (= row 0)
          (= col 0)
          (= row 1)
          (= row col))
      1
      (pascal-iter-iter row 1 row col)))

<span style="color: #93a1a1; font-style: italic;">;; </span><span style="color: #93a1a1; font-style: italic;">this looks a little bit weird because I just don't wanna calculate the factorials</span>

(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">pascal-iter-iter</span> row deno num count)
  (<span style="color: #859900;">if</span> (= count 1) <span style="color: #93a1a1; font-style: italic;">;; </span><span style="color: #93a1a1; font-style: italic;">do the division when count hits 1</span>
      (/ num deno)
      (pascal-iter-iter (- row 1)
                        (* deno count)
                        (* num
                           (- row 1))
                        (- count 1))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline13" class="outline-3">
<h3 id="orgheadline13"><span class="section-number-3">1.13</span> Exercise 1.13</h3>
<div class="outline-text-3" id="text-1-13">
<p>
Just prove \(\vert \frac{\psi^n}{\sqrt{5}}\vert < 0.5\).
</p>
</div>
</div>
<div id="outline-container-orgheadline14" class="outline-3">
<h3 id="orgheadline14"><span class="section-number-3">1.14</span> Exercise 1.14</h3>
<div class="outline-text-3" id="text-1-14">

<div class="figure">
<p><img src="http://sicp.readthedocs.io/en/latest/_images/14.png" alt="14.png" width="916px" height="696px" />
</p>
<p><span class="figure-number">Figure 1:</span> from <a href="http://sicp.readthedocs.io/en/latest/_images/14.png">readthedocs</a></p>
</div>
</div>
</div>
<div id="outline-container-orgheadline17" class="outline-3">
<h3 id="orgheadline17"><span class="section-number-3">1.15</span> Exercise 1.15</h3>
<div class="outline-text-3" id="text-1-15">
</div><div id="outline-container-orgheadline15" class="outline-4">
<h4 id="orgheadline15"><span class="section-number-4">1.15.1</span> a</h4>
<div class="outline-text-4" id="text-1-15-1">
<p>
Whenever angle is greater than 0.1, <code>p</code> will be called. 12.15 -&gt;
4.05 -&gt; 1.35 -&gt; 0.45 -&gt; 0.15 -&gt; 0.05 -&gt; backtracking, so <code>p</code> is
applied 5 times.
</p>

<p>
On the other hand, we can use <code>trace-entry</code> to trace the procedure
p.
</p>
<div class="org-src-container">

<pre class="src src-scheme">[Entering #[compound-procedure 2 p]
    Args: 4.9999999999999996e-2]
[Entering #[compound-procedure 2 p]
    Args: .1495]
[Entering #[compound-procedure 2 p]
    Args: .4351345505]
[Entering #[compound-procedure 2 p]
    Args: .9758465331678772]
[Entering #[compound-procedure 2 p]
    Args: -.7895631144708228]
<span style="color: #93a1a1; font-style: italic;">;</span><span style="color: #93a1a1; font-style: italic;">Value: -.39980345741334</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline16" class="outline-4">
<h4 id="orgheadline16"><span class="section-number-4">1.15.2</span> b</h4>
<div class="outline-text-4" id="text-1-15-2">
<p>
Every time the angle will be divided by 3 and it's a recursive
procedure, the space and time complexity are all \(O(\log_3a)\).
</p>
</div>
</div>
</div>
<div id="outline-container-orgheadline18" class="outline-3">
<h3 id="orgheadline18"><span class="section-number-3">1.16</span> Exercise 1.16</h3>
<div class="outline-text-3" id="text-1-16">
<p>
The strategy is:
</p>
<ul class="org-ul">
<li>if <code>n</code> is even, then we call the iterative procedure on squared <code>b</code>
  and halved <code>n</code></li>
<li>else we update a to a times b, and call the iterative procedure on
squared <code>b</code> and halved <code>n-1</code>.</li>
</ul>
<div class="org-src-container">

<pre class="src src-scheme">(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">even?</span> n) (= (remainder n 2) 0))

(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">fast-expt</span> b n) (fast-expt-iter 1 b n))

(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">fast-expt-iter</span> a b n)
  (<span style="color: #859900;">cond</span> ((= n 0) a)
        ((even? n) (fast-expt-iter a
                                   (* b b)
                                   (/ n 2)))
        (<span style="color: #859900;">else</span> (fast-expt-iter (* a b)
                              (* b b)
                              (/ (- n 1) 2)))))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline19" class="outline-3">
<h3 id="orgheadline19"><span class="section-number-3">1.17</span> Exercise 1.17</h3>
</div>
<div id="outline-container-orgheadline20" class="outline-3">
<h3 id="orgheadline20"><span class="section-number-3">1.18</span> Exercise 1.18</h3>
<div class="outline-text-3" id="text-1-18">
<div class="org-src-container">

<pre class="src src-scheme">(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">double</span> n) (+ n n))
(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">halve</span> n) (/ n 2))

(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">even?</span> n) (= (remainder n 2) 0))
<span style="color: #93a1a1; font-style: italic;">;; </span><span style="color: #93a1a1; font-style: italic;">recursive</span>
(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">x-recursive</span> a b)
  (<span style="color: #859900;">if</span> (&lt; b 0)
      (- (x-recursive-iter a
                           (abs b)))
      (x-recursive-iter a b)))
(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">x-recursive-iter</span> a b)
  (<span style="color: #859900;">cond</span> ((= b 1) a)
        ((even? b) (double (x-recursive-iter a (halve b))))
        (<span style="color: #859900;">else</span> (+ a (x-recursive-iter a (- b 1))))))

<span style="color: #93a1a1; font-style: italic;">;; </span><span style="color: #93a1a1; font-style: italic;">iterative</span>
(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">x-iterative</span> a b)
  (<span style="color: #859900;">if</span> (&lt; b 0)
      (- (x-iter 0 a (abs b)))
      (x-iter 0 a b)))
(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">x-iter</span> n a b)
  (<span style="color: #859900;">cond</span> ((= b 0) n)
        ((even? b) (x-iter n
                           (double a)
                           (halve b)))
        (<span style="color: #859900;">else</span> (x-iter (+ n a)
                      a
                      (- b 1)))))
</pre>
</div>
<p>
Note that we have to handle the case when b is negative.
</p>
</div>
</div>
<div id="outline-container-orgheadline21" class="outline-3">
<h3 id="orgheadline21"><span class="section-number-3">1.19</span> Exercise 1.19</h3>
<div class="outline-text-3" id="text-1-19">
<p>
By applying the transform \(T_{pq}\) twice, we can derive that the new
transform \(T_{p'q'}\):
</p>
\begin{align*}
a &\leftarrow b(2pq+q^2) + a(2pq+q^2) + a(p^2+q^2) \\
b &\leftarrow b(p^2+q^2) + a(2pq+q^2)
\end{align*}
<p>
therefore,
</p>
\begin{align*}
p' &= p^2 + q^2 \\
q' &= 2pq + q^2
\end{align*}

<div class="org-src-container">

<pre class="src src-scheme">(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">square</span> x) (* x x))
(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">even?</span> n) (= (remainder n 2) 0))

(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">fib</span> n)
  (fib-iter 1 0 0 1 n))
(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">fib-iter</span> a b p q count)
  (<span style="color: #859900;">cond</span> ((= count 0) b)
        ((even? count)
         (fib-iter a
                   b
                   (+ (square p) (square q))
                   (+ (square q) (* 2 p q))
                   (/ count 2)))
        (<span style="color: #859900;">else</span> (fib-iter (+ (* b q) (* a q) (* a p))
                        (+ (* b p) (* a q))
                        p
                        q
                        (- count 1)))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline22" class="outline-3">
<h3 id="orgheadline22"><span class="section-number-3">1.20</span> Exercise 1.20</h3>
<div class="outline-text-3" id="text-1-20">
<p>
For applicative order substitution, 4 times.
</p>
<div class="org-src-container">

<pre class="src src-scheme">(gcd 206 40) <span style="color: #93a1a1; font-style: italic;">;</span><span style="color: #93a1a1; font-style: italic;">(gcd 40 (remainder 206 40))</span>
(gcd 40 6)   <span style="color: #93a1a1; font-style: italic;">;</span><span style="color: #93a1a1; font-style: italic;">(gcd 6 (remainder 40 6))</span>
(gcd 6 4)    <span style="color: #93a1a1; font-style: italic;">;</span><span style="color: #93a1a1; font-style: italic;">(gcd 4 (remainder 6 4))</span>
(gcd 4 2)    <span style="color: #93a1a1; font-style: italic;">;</span><span style="color: #93a1a1; font-style: italic;">(gcd 2 (remainder 4 2))</span>
(gcd 2 0)    <span style="color: #93a1a1; font-style: italic;">;</span><span style="color: #93a1a1; font-style: italic;">no remainder call</span>
2
</pre>
</div>
<p>
For normal order, use the following symbols to track the process,
</p>
<ul class="org-ul">
<li>t1 = (remainder 206 40) = 6, evaluation needs call <code>remainder</code> 1 time.</li>
<li>t2 = (remainder 40 t1) = 4, 2 times.</li>
<li>t3 = (remainder t1 t2) = 2, 4 times.</li>
<li>t4 = (remainder t2 t3) = 0, 7 times.</li>
</ul>
<div class="org-src-container">

<pre class="src src-scheme">(gcd 206 40)

(gcd 40 t1)

if (= t1 0)   <span style="color: #93a1a1; font-style: italic;">;; </span><span style="color: #93a1a1; font-style: italic;">#f +1</span>

(gcd t1 t2)

if (= t2 0)  <span style="color: #93a1a1; font-style: italic;">;; </span><span style="color: #93a1a1; font-style: italic;">#f +2</span>

(gcd t2 t3)

if (= t3 0)  <span style="color: #93a1a1; font-style: italic;">;; </span><span style="color: #93a1a1; font-style: italic;">#f +4</span>

(gcd t3 t4)

if (= t4 0) <span style="color: #93a1a1; font-style: italic;">;; </span><span style="color: #93a1a1; font-style: italic;">#t +7</span>

t3     <span style="color: #93a1a1; font-style: italic;">;; </span><span style="color: #93a1a1; font-style: italic;">+4</span>
</pre>
</div>
<p>
18 times in total.
</p>
</div>
</div>
<div id="outline-container-orgheadline23" class="outline-3">
<h3 id="orgheadline23"><span class="section-number-3">1.21</span> Exercise 1.21</h3>
<div class="outline-text-3" id="text-1-21">
<div class="org-src-container">

<pre class="src src-scheme">(load <span style="color: #2aa198;">"utils.scm"</span>) <span style="color: #93a1a1; font-style: italic;">; </span><span style="color: #93a1a1; font-style: italic;">square</span>

(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">smallest-divisor</span> n) (find-divisor n 2))
(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">find-divisor</span> n test-divisor)
  (<span style="color: #859900;">cond</span> ((&gt; (square test-divisor) n) n)
        ((divides? test-divisor n) test-divisor)
        (<span style="color: #859900;">else</span> (find-divisor n (+ test-divisor 1)))))
(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">divides?</span> a b) (= (remainder b a) 0))

(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">prime?</span> n)
  (= n (smallest-divisor n)))
</pre>
</div>
<div class="org-src-container">

<pre class="src src-scheme">1 ]=&gt; (smallest-divisor 199)

<span style="color: #93a1a1; font-style: italic;">;</span><span style="color: #93a1a1; font-style: italic;">Value: 199</span>

1 ]=&gt; (smallest-divisor 1999)

<span style="color: #93a1a1; font-style: italic;">;</span><span style="color: #93a1a1; font-style: italic;">Value: 1999</span>

1 ]=&gt; (smallest-divisor 19999)

<span style="color: #93a1a1; font-style: italic;">;</span><span style="color: #93a1a1; font-style: italic;">Value: 7</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline24" class="outline-3">
<h3 id="orgheadline24"><span class="section-number-3">1.22</span> Exercise 1.22</h3>
<div class="outline-text-3" id="text-1-22">
<p>
We make some modifications to time-prime-test procedure so that it
only print out prime numbers. Use
<code>real-time-clock</code> to get the current time in miliseconds rather than
<code>runtime</code> (in seconds).
</p>
<div class="org-src-container">

<pre class="src src-scheme">(load <span style="color: #2aa198;">"smallest-divisor.scm"</span>)

(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">even?</span> n) (= (remainder n 2) 0))
(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">time-prime-test</span> n)
  (start-prime-test n (real-time-clock)))
(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">start-prime-test</span> n start-time)
  (<span style="color: #859900;">if</span> (prime? n)
      (report-prime n (- (real-time-clock) start-time))))
(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">report-prime</span> n elapsed-time)
  (newline)(display n)  (display <span style="color: #2aa198;">" *** "</span>) (display elapsed-time))

(<span style="color: #859900;">define</span> (<span style="color: #268bd2;">search-for-primes</span> start end)
  (<span style="color: #859900;">if</span> (&lt; start end)
      (<span style="color: #859900;">cond</span> ((even? start)
             (search-for-primes (+ start 1) end))
            (<span style="color: #859900;">else</span> (time-prime-test start)
                  (search-for-primes (+ start 2)
                                     end)))))

(search-for-primes 1000 1020)
(search-for-primes 10000 10038)
(search-for-primes 100000 100044)
(search-for-primes 1000000 1000038)

(search-for-primes 1000000000 1000000022)
(search-for-primes 10000000000 10000000062)
(search-for-primes 100000000000 100000000058)
(search-for-primes 1000000000000 1000000000064)
</pre>
</div>
<p>
Searching for small prime numbers is really fast, it's hard to see the
difference. When searching big prime numbers, the growth of the time
cost conforms to growth of \(\sqrt(10)\).
</p>
<div class="org-src-container">

<pre class="src src-scheme">1009 *** 0
1013 *** 0
1019 *** 0
10007 *** 0
10009 *** 1
10037 *** 0
100003 *** 0
100019 *** 1
100043 *** 0
1000003 *** 2
1000033 *** 2
1000037 *** 1
1000000007 *** 39
1000000009 *** 53
1000000021 *** 36
10000000019 *** 102
10000000033 *** 107
10000000061 *** 110
100000000003 *** 337
100000000019 *** 326
100000000057 *** 327
1000000000039 *** 1048
1000000000061 *** 1035
1000000000063 *** 1036
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgheadline26" class="outline-2">
<h2 id="orgheadline26"><span class="section-number-2">2</span> <span class="todo TODO">TODO</span> Building Abstractions with Data</h2>
</div>
<div id="outline-container-orgheadline27" class="outline-2">
<h2 id="orgheadline27"><span class="section-number-2">3</span> <span class="todo TODO">TODO</span> Modularity, Objects, and State</h2>
</div>
<div id="outline-container-orgheadline28" class="outline-2">
<h2 id="orgheadline28"><span class="section-number-2">4</span> <span class="todo TODO">TODO</span> Metalinguistic Abstraction</h2>
</div>
<div id="outline-container-orgheadline29" class="outline-2">
<h2 id="orgheadline29"><span class="section-number-2">5</span> <span class="todo TODO">TODO</span> Computing with Register Machines</h2>
</div>
</div>
<div id="postamble" class="status">
<div id='disqus_thread'></div>
<script type='text/javascript'>
  // required: replace example with your forum shortname
  var disqus_shortname = 'kevin5396blog';
  (function() {
      var dsq = document.createElement('script');
      dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] ||
       document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript><p>Please enable JavaScript to view the
  <a href='http://disqus.com/?ref_noscript'>comments powered by Disqus.</a></p>
</noscript><div class='footer'>
Copyright 2016 &copy; <a href='https://github.com/kevin5396'>Kangwei Ling</a><br/>
Last updated 2016-09-13 <br/>
Built with <a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.5.1 (<a href="http://orgmode.org">Org</a> mode 8.3.4) <br/>
</div>
<script type='text/javascript'>
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
 (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
 m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
 })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

 ga('create', 'UA-76818760-1', 'auto');
 ga('send', 'pageview');

</script>
</div>
</body>
</html>
